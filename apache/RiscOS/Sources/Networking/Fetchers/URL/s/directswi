; Copyright 1998 Acorn Computers Ltd
;
; Licensed under the Apache License, Version 2.0 (the "License");
; you may not use this file except in compliance with the License.
; You may obtain a copy of the License at
;
;     http://www.apache.org/licenses/LICENSE-2.0
;
; Unless required by applicable law or agreed to in writing, software
; distributed under the License is distributed on an "AS IS" BASIS,
; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
; See the License for the specific language governing permissions and
; limitations under the License.
;

	AREA	|directswis$$Code|,CODE,READONLY,PIC

	EXPORT	directswi

directswi
	MOV	ip, sp
	STMDB	sp!,{a1-a4}
	STMDB	sp!,{v1-v6,fp,ip,lr,pc}

	AND	fp, a3, #63
	LDMIA	a4, {r0-r9}
	LDR	ip, [sp, #10*4]
	MOVS	lr, pc
	LDR	pc, [sp, #11*4]
	MOV	a1, a1
	MOV	a1, a1
	MOV	fp, #0
	LDR	ip, [sp, #14*4]
	TEQ	ip, #0
	STMNEIA	ip, {r0-r9}
	MOVVC	a1, #0
 [ {CONFIG}=26
        LDMIA   sp,{v1-v6,fp,sp,pc}^
 |
        LDMIA   sp,{v1-v6,fp,sp,pc}
 ]

	END
