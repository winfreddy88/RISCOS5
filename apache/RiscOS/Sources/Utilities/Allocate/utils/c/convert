/* reading allocate files on a pc...
 * hacked from allocate sources
 *
 * read file in
 * print developer details
 * print alloc details (c/o save routine)
 *
 * amg (with a head cold) 2003/07/21
 */

#ifndef BOOL
#define BOOL int
#define TRUE 0
#define FALSE !TRUE
#endif

#include <stdio.h>
#include <stdlib.h>
#include "datafile.h"
#include "details.h"

 int main(int argc, char *argv[])
 {
   DataFileObjectList *anchor;

   if (argc !=2)
   {
     printf("Syntax: convert <filename>\n");
     exit(1);
   }

   datafile_load_file(argv[1],&anchor);

   {
     DetailsInfo *details=details_get_ptr();
     printf("%s\n",details->name);
     printf("%s\n",details->company);
     printf("%s\n",details->dev_no);
     printf("%s\n",details->address1);
     printf("%s\n",details->address2);
     printf("%s\n",details->address3);
     printf("%s\n",details->address4);
     printf("%s\n",details->phone);
     printf("%s\n",details->fax);
     printf("%s\n\n",details->email);
   }

   {
      DataFileObjectList *list=anchor;
      int writ;

      while (list)
      {
        char text[2048];

        writ=object_describe(list->object, text, 2047);
        if (writ>2047)
        {
          printf("Description exceeds 2K\n");
          exit(1);
        }
        printf("%s\n",text);
        list=list->next;
      }
    }
 }
