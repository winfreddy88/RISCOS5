/* Copyright 2007 Castle Technology Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* Title:   throwback.h
 * Purpose: deal with error 'throwback' from tools
 * Author:  IDJ
 * History: 07-Mar-90: IDJ: created
 *          08-Mar-90: IDJ: added handlers 
 *
 */

#ifndef __wimp_h
#include "wimp.h"
#endif

/************ message types ***************/

typedef struct { char filename[228]; } throwback_msg_procfile;

typedef struct { char filename[228]; } throwback_msg_errorin;

typedef struct
{
   int line_number;
   int severity;
   char description[220];
} throwback_msg_details;

typedef struct throwback_msgstr 
{
   wimp_msghdr hdr;
   union 
   {
     char chars[228];
     int words[57];
     throwback_msg_procfile  processing_file;
     throwback_msg_errorin   error_in;
     throwback_msg_details   details;
   } data;
} throwback_msgstr;


typedef struct throwback__sessionstr *throwback_session;


/**************** error severity **********/

#define throwback_err_warning 0
#define throwback_err_error   1
#define throwback_err_serious 2


extern throwback_session throwback_new_session(int id);
   /* start a new throwback session with given id */

extern void throwback_close_handler(char *filename, txtedit_state *s, void *handle);
   /* used to check that markers are disposed of etc. */
