/* Copyright 1996 Acorn Computers Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*> h.DOSFS <*/
/*-------------------------------------------------------------------------*/
/* System static variables                      Copyright (c) 1990 JGSmith */
/*-------------------------------------------------------------------------*/

#ifndef __h_DOSFS
#define __h_DOSFS

/*-------------------------------------------------------------------------*/

typedef unsigned char   byte ;
typedef unsigned int    word ;

#define MAX(a,b)        ((a)>(b)?(a):(b))
#define MIN(a,b)        ((a)<(b)?(a):(b))
#define WORDALIGN(v)    (((v) + 3) & ~3)
#define UNUSED(x)       ((x) = (x))    /* deal with unused parameters */
#ifndef FALSE
#define FALSE           0
#define TRUE            (!FALSE)
#endif

/*-------------------------------------------------------------------------*/
/* global (static) variables used within the module */
extern void *dosfs_msgarea(void); /* Generated by 'resgen' */
extern int discopswi;
extern int module_flags ;         /* Global flags, mixture of: */
#define TRUNCATE_NAMES        0x00000001

#include "DOSshape.h"

/* The DOSMAP structure */
typedef struct mapentry {
                         struct mapentry *next ;
                         char             dosext[8] ; /* 7 chars + NULL */
                         word             ROtype ; /* lo 12bits */
                        } mapentry ;

extern mapentry *maplist ;      /* list of defined mappings */

/*-------------------------------------------------------------------------*/
/* Data return structures to RISC OS world (from C module world) */

extern FS_open_block fblock ;
extern FS_datestamp  tstamp ;
extern FS_cat_entry  fcat ;
extern FS_dir_block  dblock ;
extern FS_free_space fspace ;

/*-------------------------------------------------------------------------*/
/* open file handle list */

extern FILEhand *FILE_list ;

/*-------------------------------------------------------------------------*/
/* DOS disc type descriptions */

typedef struct DOSdiscinfo {
/* format identifier      */ char *idtext;
/* format table entry     */ byte findex;
/* show in format menu?   */ byte in_menu;
/* The following used for constructing boot block: */
/* shape identity byte    */ byte magic_ID;
/* secs/cluster           */ byte secsclus;
/* secs/FAT               */ byte secsFAT;
/* root directory size    */ byte rootsize;
                           } DOSdiscinfo;

/*-------------------------------------------------------------------------*/

#endif /* __h_DOSFS */

/*-------------------------------------------------------------------------*/
/*> EOF h.DOSFS <*/
